<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="assets/styles/main.css">
    <script type="application/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script type="application/javascript" src="assets/scripts/ConfigurationGenerator.js"></script>
    <script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.2.0/mustache.min.js"></script>
    <script type="x-tmpl-mustache" id="config-mst">
        <a href="#" class="list-group-item list-item-group-normal ccr-small-text">{{result}} ==> {{data}}</a>
    </script>

    <title>CCR Configuration Generator</title>
</head>
    <body>
        <div class="row btn-toolbar">
            <div class="btn btn-success" onclick="handleGenerateClicked()">Generate</div>
        </div>
        <div class="row">
            <div class="col-lg-12" id="generatedConfigurations">

            </div>
        </div>

        <script type="application/javascript">
            var template = $('#config-mst').html();
            Mustache.parse(template);
            function handleGenerateClicked() {
                var generator = new ConfigurationGenerator();
                var configurations = generator.generate();
                var flattened = generator.flattened(configurations);
                console.log('flattened.length = ' + flattened.length);
                generator.postToService(flattened, handlePostResult);
            }

            function handlePostResult(args) {
                $('#generatedConfigurations').append(Mustache.render(template, args))
            }
        </script>
    </body>
</html>